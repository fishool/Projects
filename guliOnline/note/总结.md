# day01-项目介绍和Mybatis Plus的使用

## 总结

### 上午

1、什么是在线教育

2、在线教育的十个行业分类

3、八个商业模式

4、Mybatis Plus入门

注意：idea的初始配置：jdk、编码、maven

### 下午

**1、CRUD**

1.1、CREATE：增加、分布式id生成器

1.2、RESEARCH：查询、分页

1.3、UPDATE：更新、填充默认值、乐观锁

1.4、DELETE：删除、逻辑删除



**2、性能分析插件**

注意：只能在开发环境和测试环境启用



## 作业

1、CRUD

2、查询

3、可选：分布式id生成策略汇总 <https://www.cnblogs.com/haoxinyue/p/5208136.html

4、03-CRUD 接口：（3）测试selectMapsPage分页：结果集是Map



## 面试

1、项目介绍

从整体功能和架构两方面谈。接着介绍自己完成了什么功能，使用了什么技术。



2、项目架构设计的主要原则

高可用、安全、性能、可扩展性、成本



3、分布式系统中的id生成策略



4、乐观锁和悲观锁的概念



5、乐观锁的实现方案



# day02-课程中心微服务的搭建

## 总结

### 上午

1、数据库的设计原则和规范

2、项目基础架构搭建

3、课程中心微服务搭建

4、代码生成器



### 下午

1、讲师列表的查询和删除

2、配置Swagger：引入依赖、配置文件、Swagger注解

3、统一返回结果：定义枚举、定义R对象、controler方法统一返回R对象

4、分页和条件查询



## 作业

1、笔记：补充：REST

2、阿里巴巴Java开发规范

3、课堂内容：项目搭建、列表、逻辑删除、分页、统一返回结果、swagger

4、条件查询

5、新增和修改



## 面试

1、数据库优化的主要方式

（1）微服务中做分库设计

（2）分表：横向分表，解决单表数据量过大的问题（id策略、hash id、），纵向分表，解决单表列过多，或者单列内容过多的问题，提升查询效率

（3）设计冗余列：避免过多的表关联，提升查询效率

（4）创建索引：针对经常被放在where条件中的列创建索引

（5）禁用外键约束

2、SQL优化

扩展知识：58到家MySQL军规

3、微服务拆分的原则

康威定律（百度）



# day03-统一日志、统一异常、前端知识点

## 总结

### 上午

一、**统一异常**

1、处理统一异常

- 创建统一异常处理器：类@ControllerAdvice、方法@ExceptionHandler(Exception.class)
- 扫描异常处理器包

2、处理特定异常

在异常处理器中增加针对特定异常的异常处理方法

3、自定义异常

创建自定义异常类，继承RuntimeException

在异常处理器中增加自定义异常处理方法

业务中抛出自定义异常



二、**统一日志**

1、日志级别

FATAL、ERROR、WARN、INFO、DEBUG

ALL、OFF

2、Logback

SpringBoot默认的日志记录器

扩展阅读：和log4j的区别

logback-spring.xml配置文件：基本变量、日志记录器、日志记录器级别定义和整合

3、开发代码中添加日志

在需要日志的类上添加注解：@Slf4j

使用log对象打印日志

4、将错误日志输出的日志文件

5、日志错误堆栈信息的打印



三、**前端开发工具**

1、安装VSCode

2、插件安装

3、基本配置



### 下午

1、Node.js

要求：知道Node.js的概念和应用场景

2、ES6

要求：能看懂9个例子

3、NPM

常用

初始化项目

```
npm init -y
```

安装项目

```
npm install
```

安装依赖

```
npm install 依赖名称@版本号

npm install -D 开发工具名称
```

4、Babel

作用：可以将ES6代码转为ES5代码

5、模块化

（1）CommonJS模块化

导出模块成员：module.exports = {}

引入模块：require('./四则运算.js')

（2）ES6模块化

**方式一：**

导出模块成员：export 函数定义

引入模块：import  { 模块成员1, 模块成员2} from './userApi.js'

**方式二：**

导出模块成员：

export default{

  模块成员（函数定义），

  模块成员（函数定义）

}

引入模块：import user from './userApi2.js'

**5、webpack**

Webpack 是一个前端资源加载/打包工具。它将根据模块的依赖关系进行静态分析，然后将这些模块按照指定的规则生成对应的静态资源。

6、Vue.js

html中的基本结构：

```
new Vue({   //创建vue对象

  el: '#app',  //指定要渲染的元素

  data: {  //定义页面中要显示的数据

    key1: value1,

    key2: value2

  },

  methods:{

     method1(){

      方法体

    },

    method2(){

      方法体

    }

  }

})
```

声明式渲染：

```
{{数据模型}}
```

数据绑定指令：当html标签中的值需要取自数据模型，此时需要数据绑定指令

```
<h1 v-bind:title="数据模型">标题</h1>
<h1 :title="数据模型">标题</h1> <!-- 简写 -->
```

双向数据绑定指令：页面中的用户交互组件需要使用v-model进行数据绑定

```
<input v-model="数据模型">
```

事件绑定指令：

```
<button v-on:click="方法()">按钮<button>
<button @click="方法()">按钮<button><!-- 简写 -->
```



## 作业

1、统一异常、统一日志

2、可以编写模块化代码

3、Vue.js的例子



# day04-前端知识点和前端项目创建

## 总结

### 上午

1、axios：Vue全家桶中完成ajax操作的库

2、element-ui：基于Vue的前端组件库

3、vue-element-admin：可以二次开发的后台管理系统、vue-admin-template是一个精简版

4、EasyMock

5、项目的搭建和页面修改



### 下午

1、配置路由

（1）路由文件：router/index.js

（2）组件：讲师列表组件 views/edu/teacher/list.vue、讲师表单组件 views/edu/teacher/from.vue

2、讲师列表的实现

（1）定义api：api/edu/teacher.js

（2）定义列表组件：模板、js

​      模板：根节点<template>，根节点下只能有一个子节点<div>，div下添加具体的表格组件

​      脚本：生命周期函数created() - 页面加载完成后调用，data的定义 - data() {return { 数据内容}},

## 作业

1、前端项目guli-admin的创建

2、讲师列表和讲师表单页面的实现

3、前后端联调

4、模拟用户登录模块的整合

## 面试

1、项目中如何处理跨域问题

controller中使用注解@CrossOrigin

# day05-文件上传和POI

## 总结

### 上午

**1、阿里云OSS测试**

（1）创建子账号

（2）获取子账号Access_key_id和Access_key_secret

**2、后端项目中实现上传业务**

（1）创建常量工具类：从配置文件中读取常量信息

（2）创建文件上传业务

**3、前端整合上传组件**

整合过程：

step1：将上传组件复制到组件目录：src/components/ImageCropper、src/components/PanThumb

step2：在表单组件中引入组件模块

```
import ImageCropper from '@/components/ImageCropper'

import PanThumb from '@/components/PanThumb'
```

step3：注册组件，在vue对象中添加components节点

```
components: { ImageCropper, PanThumb }
```

step4：在页面中引用组件

```
<pan-thumb ......
<image-cropper ......
```

step5：组件属性的设置和脚本的编写



### 下午

1、poi

（1）写：

03-HSSFWorkbook、07-XSSFWorkbook

大文件写：HSSF、XSSF和SXSSF

HSSF：速度快，超过65536则抛出异常

XSSF：速度慢，可以写较大文件，但是文件过大会发生内存溢出

```
OutOfMemoryError错误
StackOverflowError错误
```

SXSSF：速度快，理论上可以写的文件大小不受限制，但是如果文件过大，建议使用多线程。

（2）读



## 作业

1、day05-Part07【知识补充】使用阿里云OSS：01-阿里云存储OSS：5、6

2、课堂内容

## 面试

1、如何利用poi写大量的数据到excel中

2、开发时如何进行内存分析

3、内存溢出和堆栈溢出的区别，什么情况下会碰到，如何解决

4、项目中什么时候用到了多线程编程

5、线程池的作用

6、定时器的应用



参考

<https://item.jd.com/10974436.html>

<http://javascript.ruanyifeng.com/>



# day06-课程分类、注册中心

## 总结

### 上午

1、课程分类的后端实现

（1）一级分类的Excel读取和数据库插入：判断列的合法性和数据是否重复

（2）二级分类的Excel读取和数据库插入：判断列的合法性和数据是否重复

2、前端的实现和整合

### 下午

1、微服务回顾

2、注册中心的搭建



## 作业

1、课堂内容

2、day06-Part10【项目】整合POI实现课程类目管理：3节、4节

3、课后阅读：day06-Part11【Spring Cloud基础组件】注册中心：1节、2节、扩展阅读部分

4、搭建eureka注册中心

5、day06-Part12【Spring Cloud基础组件】服务调用 所有内容的实现



## 面试

1、Spring Cloud和Spring Boot是什么关系

2、微服务架构基础框架选择：Spring Cloud还是Dubbo

3、项目中有哪些远程调用方式



# day07-服务调用

## 总结

### 上午

1、作业讲解：用户中心和统计分析微服务的搭建

2、Echarts的入门demo

3、作业讲解：使用Feign实现服务调用

### 下午

1、统计管理功能前端实现

（1）统计信息的生成

（2）图表的展示

2、课程基本信息管理

（1）步骤导航

（2）第一步：课程基本信息的新建

课程标题、价格、课时数



## 面试

1、SQL语句中的常用函数

日期处理函数（DATE）、字符串处理函数、数值处理函数、三种数据类型间的转换函数



# day08-课程管理

## 总结

### 上午

**1、课程分类二级联动**

解决方案一：一次性获取所有记录，在前端实现联动脚本

​			特点：数据量小、但是服务器的并发较多，业务处理复杂，只需要一个接口

解决方案二：先获取顶层数据，在前端通过ajax的方式动态获取二级记录

​			特点：数据量小，此种方式会增加服务器的并发，业务处理简单，增加接口数量

**2、讲师下拉列表代码分析**

**3、富文本编辑器的整合**

**4、课程图片的上传**

**5、章节管理的需求和后台代码的实现**

**6、章节管理前端代码的实现**

要理解的问题：

（1）如何从父组件传值到子组件

（2）如何在父组件中调用子组件的方法

（3）如何在子组件中调用父组件的方法：使用$emit 定义监听函数

### 下午

1、阿里云视频点播业务介绍

2、阿里云视频点播平台的技术架构

3、阿里云视频点播控制台的初始设置



## 作业

1、day07-Part14【项目】课程基本信息管理 中的作业

2、day08-Part16【项目】课程课时信息管理



# day09-阿里云视频上传

## 总结

### 上午

1、阿里云api、sdk简介和测试用例

2、阿里云视频安全

3、阿里云文件播放测试：url地址播放、加密视频播放



### 下午

视频上传两种方案的比较：

1、本地上传（浏览器环境下，需要使用javascript sdk上传）

​     			（jdk环境下，可以使用java sdk上传）

2、服务器上传（先上传到tomcat，在tomcat环境下调用java sdk进行上传）





## 作业

1、课堂内容

2、视频删除、视频回显

3、预习javascript sdk上传

4、有精力的同学预习OAuth2



## 面试

**1、开发中遇到的问题：**

当依赖了xxxxx-jdbc包时，服务器启动时需要检查jdbc数据源配置，但是项目中如果不需要连接jdbc，name我们可以关闭数据源配置的自动检查功能：

@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)

2、注册到Eureka服务器中的客户端挂掉如何处理

Eureka的自我保护模式：客户端注册信息不会被eureka服务器剔除

客户端微服务的集群部署：可以保证微服务的可访问性

3、Eureka挂掉了怎么办

客户端会尝试重新连接

部署Eureka服务器集群

4、开放平台的api接口的安全性如何保证

签名机制



# day10-JavaScript SDK 和 视频播放整合

## 总结

### 上午

JavaScript SDK上传的基本流程

1、服务器端：获取上传地址和凭证接口、刷新上传凭证接口

2、客户端：

2.1、下载javascript sdk

2.2、整合sdk（在index.html中引入脚本文件）

2.3、vue模板：使用el-upload上传组件

2.4、js脚本：uploader对象

### 下午

1、Nuxt：服务器端渲染页面、搜索引擎优化。

2、功能：在线教育网站、

首页：从缓存中读取数据、静态页面、智能首页

列表页：搜索引擎、缓存

详情页：静态页面、热点数据缓存



# day11-阿里云视频播放和OAuth2.0

## 总结

### 上午

1、阿里云视频播放器的整合流程

（1）获取视频播放凭证，使用阿里云sdk（后端api接口）

（2）阿里云客户端播放器的整合（前端js组件）

2、播放器插件

截图、跑马灯、视频广告、弹幕

问题：版本



### 下午

1、OAuth2.0

2、微信整合

3、JWT：自包含令牌、存储在客户端、由三部分组成

## 面试

1、谈谈OAuth2

2、什么是JWT令牌



# day12-微信登录

## 总结

### 上午

**准备**

1、注册微信开放平台

2、申请开发者资质（等待审核 1-2工作日 300块钱）

3、创建网站应用（等待审核 7个工作日）

4、启动内网穿透服务

5、微信回调跳转服务器（）

**开发流程**

1、生成授权url

在业务服务器中配置url参数，并且在java后台做请求重定向，微信服务器会向客户端发送一个登录二维码，

为了防止csrf跨站请求伪造攻击，可以设置一个可选参数state，并存入session

2、开发回调url

（1）当用户扫描二维码，并点击确认按钮后，微信服务器接收到用户确认的请求，会向业务服务器发送回调

（2）微信服务器向业务服务器发起的回调，会通过参数发送授权临时票据

（3）如果生成授权url的步骤中生成了state参数，那么微信服务器会在请求回调地址的时候原样将state参数发送回来，因此在业务服务器中校验state参数是否和session中存储的一致，不一致则是csrf攻击

（4）如果code参数和state校验合法，那么业务服务器会向微信服务器再次发起请求，此时会携带code（临时授权票据）、open_app_id 和 open_app_secret 参数，从微信服务器获取access_token 和 openid

（5）业务服务器拿到access_token（授权码）后，可以向微信服务器发起相关资源的访问请求，例如用户基本信息，我们可以使用用户基本信息在业务服务器中进行注册，达到微信登录的目的

流程：

首选根据openid判断当前微信用户在业务服务器的数据库中是否存在，

如果不存在则调用微信获取微信用户信息的接口，将用户信息存入业务数据库，实现微信用户首次登录注册的功能

如果存在则直接进行登录

如果登录陈功，则跳转到网站首页



### 下午

1、后台生成jwt

2、前端获取jwt

3、前端页面解析jwt并显示用户登录信息



## 面试

1、描述一下微信登录的具体流程

